# TheIdServer

[TheIdServer](https://github.com/Aguafrommars/TheIdServer) is an [OpenID/Connect](https://openid.net/connect/), [OAuth2](https://oauth.net/2/) and [WS-Federation](https://docs.oasis-open.org/wsfed/federation/v1.2/os/ws-federation-1.2-spec-os.html) server based on [IdentityServer4](https://identityserver4.readthedocs.io/en/latest/).

## Install

Add the repository to helm :
``` bash
❯ helm repo add agua https://aguafrommars.github.io/helm
❯ helm install aguafrommars agua/theidserver --set mysql.db.password=my-P@ssword
```

This install:

* A TheIdServer cluster with 2 replicas
* [A MySQL Master/Slave cluster](https://github.com/bitnami/charts/blob/master/bitnami/mysql/README.md) 
* [A Datalust SEQ server](https://github.com/helm/charts/blob/master/stable/seq/README.md)
* A Redis server used as SignalR backbone

## Upgrade

To upgrade the solution you need to retrieve certificates generated by the installation and MySql passwords.

### Certificates

They are stored in the k8s opaque secret `<release name>`-certs.  

#### Get generated certificates

To get the list of secret in your namespace run:

```bash
kubectl get secret
```
ex:

```bash
❯ kubectl get secrets --namespace theidserver
NAME                                   TYPE                                  DATA   AGE
aguafrommars-mysql                     Opaque                                3      10h
aguafrommars-mysql-token-qsjc9         kubernetes.io/service-account-token   3      10h
aguafrommars-theidserver-certs             Opaque                                8      10h
aguafrommars-theidserver-opaque            Opaque                                4      10h
aguafrommars-theidserver-token-wq2rw       kubernetes.io/service-account-token   3      10h
aguafrommars-redis-token-9ckf2         kubernetes.io/service-account-token   3      10h
```

To get the list of a secret keys run:

```bash
kubectl describe secret <secret name>
```

ex:

```bash
❯ kubectl describe secret aguafrommars-theidserver-certs
Name:         aguafrommars-theidserver-certs
Namespace:    theidserver
Labels:       app.kubernetes.io/instance=aguafrommars
              app.kubernetes.io/managed-by=Helm
              app.kubernetes.io/name=theidserver
              app.kubernetes.io/version=1.1.0
              helm.sh/chart=theidserver-0.1.0
Annotations:  meta.helm.sh/release-name: aguafrommars
              meta.helm.sh/release-namespace: theidserver

Type:  Opaque

Data
====
signingKey.crt:      1103 bytes
signingKey.key:      1679 bytes
ssl.crt:             1326 bytes
ssl.key:             1675 bytes
ca.crt:              1135 bytes
ca.key:              1679 bytes
dataProtection.crt:  1103 bytes
dataProtection.key:  1679 bytes
```

Use the command to get a secret value:

```bash
kubectl get secret <secret name> -o jsonpath="{.data['<secret key>']}"
```

ex:

```bash
❯ kubectl get secret theidserver-certs -o jsonpath="{.data['dataProtection\.key']}" --namespace theidserver
LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBeW5mNVBMR21jVGJOMkpDRXM0eUpHS1JlUzhQVnVsaUtYZXVpK3VQSTUzdzJ5QW52Ckt3ZWpreXVKYzhDR3VQeDFLZEpQMWVrQmowY2NZUEtaRmVHcm9HNFNaT3ZoZW1PeVJma1A1VVNwNmNreEVXY28KU1FLemMzZWNaT0pFbUR1TjFtcytub2JuSk5ZcXJkT20yK00wM1ova3dnMmlIVHFZQ0diU3o3ajVvajlwOUo5MApia05vT0pLTnIwT3I1OFdkNDd3SFFSWEgvOU9GV25LTE5ORnhvV1BzdXlDeWlEeE0xMnRzOFVRVkZaN1dUYXk0CkMwTU5qYXVTYzlJN2FBREJhREdhVUFnZzJnbkZmb2EzNG1RbUdyUTk0eHA1VERvWUI4NHdOTHA5Y1NEUVRhVWsKQ2RtVWpIMW5jTjNtU2xnR3hiYkhnN21Dcjk1cm1EYTRuQUJYeVFJREFRQUJBb0lCQVFDTmpXRmdNS2U0UVdPYgpCRGJ5dk05Z3ZoSDdFSGlOcHJkZVFJOGFyMFJYcXYwMXo5UTVsa2FqYnUzVFVvZ2VMc3JQS1cyTmxURDA5ZmQrClJENEpFVlNIZmswMzU3NGxiaXhHUllINmZZMzVtQ0xKRXdFVVFtSXAyVGNyUlJKR0NHVDZ3dEh0elUwdThOaTMKM09Dc25PWHFDSTdMcVBKdFV2alY3dVYyT3RHMHZ6Z2ZVTDRuMlBJMFZTYVplUmE3aW9DbGtwNjQzWHhZamZxUgpxUnBqV2FiNzlJU0FnK0ZTRGJPS0tTQjFHdDRDcmZHbENYSXhIcjRJN0x4UGIwZnQ4L2ZyM3I5YzRXbWF5TWcyCmhsVVY3RW1tV1lCTkEzblYzcDNrZEcyZi9jREJZQzkrc1I3cTlLMEk3N21oZFlCSFZYUlFrVjRaYy9xRTN5YXUKejZ6TWNhMHRBb0dCQU5XNWZPa2M5YUNnYndXR0xIVGdjR2Z1TFNRQkljVGhjejZEMlZqdnZiY0tPV0NQMld5SgowN0VhOW1VVGFMWElnQ3d5QWlvM3ZzNXZCZ2xwQ1FXdGFNWWk3NEk4WVQ1ZVJRRXdTUDlHWThWRnJjUFVMdGEvCkp0cCtSNzc3T0NmSDhlcTJRbkZPK2tzdDBoTnZMTkdKUEN6SGUvcmsvcmo3ZitnWldOSDBjYnI3QW9HQkFQS0UKZ3kyRm5jRXNURmpGbjV2THYrY212RGNMUU9idVZlT3dseXhzVDJkbU5WVjRYT2NEQUUyYkFpajFWU0MvM1VsdApYM285YkNBdzJkdXY0OXZhRXBJdWlBTFFYeitjSHpmUnZuZ2RhUUJBK0IweU5ISyt1MDl4bkRMS2VQak5CUlBOCnhKYVBFaUZVR0JHVnZadnFUZ0tDNTdndTNMeGtIejhseFhLdmxyMExBb0dBUWtESjlBbkNLeFVRMVltT1puemMKMjVyOTYxZGVmSVhYRDk0WGxuWmJQVTZ5RXJrRkVaeDRQMEs0ZHdUWlJPRHV1c1NWM3ppQXNjWEEvVkhPTmpCWApkblNHQXIxczk4U0paNkRzUUJZMS80Vm1KSHEyT21QdlMzUXlFWVlYRmwzcEpIVnppMlNNT3BudHNaQ1pPQ3R1CnVBTHU4QXZrMnJzOEgxc2NLWm01VjlrQ2dZQk04NFVZSGF5WHpmR1B2VzFPcHhFR1RJRXVTaERXOWNzbEN6UjgKc1FWay9zWnZqMWlUS0oyaEFrMW1KNnBTVU83clRKd2VFbjFMblpTVEk3VitYaXpFVzZWbWx5MlI1bnoxWGtVOApvY0JlaHo3ekxLbjl1czErZ01NYVRxcWg3NVByMjcvRU1qT0RoY1o1VmZVckV1YWIzMk9kU3FsWjBiOGtiMXkrCmJqNjdUd0tCZ0NIaDhFOVh1eDF1K3lGdzZScUUvZFVZV2NOZExQb1BsaHI4M1dSeHRpQnYwV0lzN2hRTmFkb3YKT2NsZW0ya1Rsams4MFVabGZlQ09WeTM0YjdLdjdKUVQ4b1RIeFp2dVhSOXhjTldRMHVvWEVvcitjVU0xaVhlaQpZZUsrMDNtTzBJT3FReUdpdnFJNHV1Z3lkQjFaeU5YS0xhdE1iWG9JUDZmMlJsVzdXV2RyCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
```

#### Configure certificates

The following table lists the configurable parameters of the TheIdServer chart and their default values for certificates configuration.

|Parameter|Description|Default|Remarks|
|-|-|-|-|
|`ssl.create`|If true, creates Kestrel servers certificate.|true|If false, `ssl.crt` and `ssl.key` must be defined.|
|`ssl.cn`|The common name used to create the Kestrel servers certificate.|`<Deployment name>`||
|`ssl.ipList`|The IP list used to create the Kestrel servers certificate.|["127.0.0.1"]||
|`ssl.altNames`|The alternative name list used to create the Kestrel servers certificate.|["`<ssl.cn>`", "`<ssl.cn>`:`<service.port.https>`", "localhost", "localhost:`<service.port.https>`"]|if `ingress.enabled=true` and `ssl.altNames` is not defined, the chart add `"<ingress.hosts.host>"` and `"<ingress.hosts.host>:<service.port.https>"` to the alternative name list.|
|`ssl.validationPeriod`|The validation period in day to create the Kestrel servers certificate.|365||
|`ssl.crt`|The Kestrel servers certificate.|nil|This value is copied in `<deployement name>`-certs secret `ssl.crt`.|
|`ssl.key`|The Kestrel servers certificate key.|nil|This value is copied in `<deployement name>`-certs secret `ssl.key`.|
|`ssl.ca.create`|If true, creates Kestrel servers certification authority certificate.|true|If false, `ssl.ca.crt` and `ssl.ca.key` must be defined.|
|`ssl.ca.trust`|If true, add certification authority certificate in the tusted certificates repo.|true|The certification authority used to generate the Kestrel servers certificate must be trusted.|
|`ssl.ca.issuer`|Issuer to create the certification authority certificate.|"`<Deployment name>` CA"|
|`ssl.ca.validationPeriod`|The validation period in day to create the certification authority certificate.|3650||
|`ssl.ca.crt`|The certification authority certificate.|nil|This value is copied in `<deployement name>`-certs secret `ca.crt`.|
|`ssl.ca.key`|The certification authority certificate key.|nil|This value is copied in `<deployement name>`-certs secret `ca.key`.|
|`dataProtection.create`|If true, creates the certificate to crypt data protection keys at rest.|true|If false, `dataProtection.crt` and `dataProtection.key` must be defined.|
|`dataProtection.cn`|The common name used to create the certificate to crypt data protection keys at rest.|`Deployment name`||
|`dataProtection.ipList`|The IP list used to create thethe certificate to crypt data protection keys at rest.|nil||
|`dataProtection.altNames`|The alternative name list used to create the certificate to crypt data protection keys at rest.|nil|
|`dataProtection.crt`|The the certificate to crypt data protection keys at rest.|nil|Required for upgrade. This value is copied in `<deployement name>`-certs secret `dataProtection.crt`.|
|`dataProtection.key`|The the certificate key to crypt data protection keys at rest.|nil|Required for upgrade. This value is copied in `<deployement name>`-certs secret `dataProtection.key`.|
|`signingKey.create`|If true, creates the certificate to crypt signing keys at rest.|true|If false, `dataProtection.crt` and `dataProtection.key` must be defined.|
|`signingKey.cn`|The common name used to create the certificate to crypt signing keys at rest.|`Deployment name`||
|`signingKey.ipList`|The IP list used to create thethe certificate to crypt signing keys at rest.|nil||
|`signingKey.altNames`|The alternative name list used to create the certificate to crypt signing keys at rest.|nil|
|`signingKey.crt`|The the certificate to crypt signing keys at rest.|nil|Required for upgrade. This value is copied in `<deployement name>`-certs secret `signingKey.crt`.|
|`signingKey.key`|The the certificate key to crypt signing keys at rest.|nil|Required for upgrade. This value is copied in `<deployement name>`-certs secret `signingKey.key`.|

> Ssl and ca certificates can be regenerated at each upgrade but we recommand to not regenerate the ca certficate.

### MySQL passwords

Passwords are store in `<release name>`-mysql secret

To get the list of a secret keys run:

```bash
kubectl describe secret <release name>-mysql
```

ex:

```bash
❯ kubectl describe secrets aguafrommars-mysql --namespace theidserver
Name:         aguafrommars-mysql
Namespace:    theidserver
Labels:       app=mysql
              app.kubernetes.io/managed-by=Helm
              chart=mysql-6.14.10
              heritage=Helm
              release=aguafrommars
Annotations:  meta.helm.sh/release-name: aguafrommars
              meta.helm.sh/release-namespace: theidserver

Type:  Opaque

Data
====
mysql-password:              22 bytes
mysql-replication-password:  10 bytes
mysql-root-password:         12 bytes
```

Use the command to get a secret value:

```bash
kubectl get secret <secret name> -o jsonpath="{.data.<secret key>}" | base64 -d
```

ex:

```bash
❯ kubectl get secrets aguafrommars-mysql -o jsonpath="{.data.mysql-password}" --namespace theidserver | base64 -d
Th€IdS€rv€r-2o2o
```

### Create the upgrade.yaml file

With values retrieve from certificates and password secrets, create a file to configure an upgrade.

ex:

```yaml
# Default values for TheIdServer.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

image:
  tag: "1.1.1"

# Dependencies configuration
theidserver:  
  mysql:
    db:
      forcePassword: true 
      password: "Th€IdS€rv€r-2o2o" # The mysql user password is required
    root:
      forcePassword: true
      password: "My$ql-8.o.21" # The mysql root password is required

  # Kestrel servers cerificates
  ssl:
    create: false
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURhakNDQWxLZ0F3SUJBZ0lSQUtGN085M0pZWlIwOWF3QStYSS94WTh3RFFZSktvWklodmNOQVFFTEJRQXcKSWpFZ01CNEdBMVVFQXhNWFlXZDFZV1p5YjIxdFlYSnpMWEJ5YVhaaGRHVWdRMEV3SGhjTk1qQXhNREU1TURZMApOakV6V2hjTk1qRXhNREU1TURZME5qRXpXakFmTVIwd0d3WURWUVFERXhSaFozVmhabkp2YlcxaGNuTXRjSEpwCmRtRjBaVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFNdC8yNFJPcUVWTzhPbzEKR1hFK2xEeW10b2N0bVhTOWt3VDkrc0JRYTcrWDRJcU1HMEQvdUx6UlNnSWl4Q3hveTJGbVFURHlVOUZWRG5EMgpNVzNzUjBmWVovTzI5V2V6QXFiTndYcWw4UDRTYnZJOStNazNoNm9zMnJMaVh3Tm9NWlVzU0pzODVNNk81OERKClhKL0UzQUZyRDhLU0k4bEc3eU9BSzYrd1hhRlhHK2o5dlg5MDdVSTNzbzFVNE1mc084VVVXajhoeTNnK21BZHMKVEpGNDVDRHluYTRwWnZzYm4yK29DbElHVis2cXZvWXhYSlJnUlJVZFYwdVhBcTE2eWJFdW1GbUJTSHlueE9uSAozdWpXcGhRWmV6bm5LVEhYQUh5UnJXM0hoZysvdHQwaFBKTWw0TnNxaHpzZEJ3WkhReVBEekVyRHFKdC95REJLCmhvcUlGOGtDQXdFQUFhT0JuVENCbWpBT0JnTlZIUThCQWY4RUJBTUNCYUF3SFFZRFZSMGxCQll3RkFZSUt3WUIKQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQXdHQTFVZEV3RUIvd1FDTUFBd1d3WURWUjBSQkZRd1VvSVVZV2QxWVdaeQpiMjF0WVhKekxYQnlhWFpoZEdXQ0dXRm5kV0ZtY205dGJXRnljeTF3Y21sMllYUmxPalUwTkRPQ0NXeHZZMkZzCmFHOXpkSUlPYkc5allXeG9iM04wT2pVME5ET0hCSDhBQUFFd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFHWVMKT1NrZnc2bXRkODlqNzBrZlBGOVljRGUzUFNUdlhSTHYveFN0YVJOeHJkSkhXR0dvS1REUFNtNDdhN2w1NFVzeQp0N1dlbHZmaFF1NWpXdDAxMjJrQnJzQ2RqcUI5Z3hOb0JjSFRNY1JCZU1UZkl5cVRLc3hHYmhjSWpkN3I0NmhNCmFvSUh1dkROZkowVnRBemc4WlIzRGtva0NMSFhURml2UzFQaFlrbUY1V3FLUnJXQTQ1RGxxUXFRbFRCWmpsY2YKandJcE1Sdm1TajF4Tks0Skh0VjlEazFaNzlGb3ovUDdmbjlZK2dRTXpVQzgwdEIzVzEzQ3RUblBSTDJ2MVVrVQp4MkEzUXlHajJxYzlzVVJNd3N3eU5lSHZPWFV2bHJXUEoyZ0c0bzZzOUZkOW94ZndaREFPWWlhelB3T3MvS1R3CllxNVRvVkdlQVhLc1JkeDdpL009Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBeTMvYmhFNm9SVTd3NmpVWmNUNlVQS2EyaHkyWmRMMlRCUDM2d0ZCcnY1Zmdpb3diClFQKzR2TkZLQWlMRUxHakxZV1pCTVBKVDBWVU9jUFl4YmV4SFI5aG44N2IxWjdNQ3BzM0JlcVh3L2hKdThqMzQKeVRlSHFpemFzdUpmQTJneGxTeEltenprem83bndNbGNuOFRjQVdzUHdwSWp5VWJ2STRBcnI3QmRvVmNiNlAyOQpmM1R0UWpleWpWVGd4K3c3eFJSYVB5SExlRDZZQjJ4TWtYamtJUEtkcmlsbSt4dWZiNmdLVWdaWDdxcStoakZjCmxHQkZGUjFYUzVjQ3JYckpzUzZZV1lGSWZLZkU2Y2ZlNk5hbUZCbDdPZWNwTWRjQWZKR3RiY2VHRDcrMjNTRTgKa3lYZzJ5cUhPeDBIQmtkREk4UE1Tc09vbTMvSU1FcUdpb2dYeVFJREFRQUJBb0lCQUhMVlJaUlZwcExseHdFQwowY2FibjU3U0hMSVBRMGNqS3ZGb09MV0pMQ1JEbWd2VW9CUi91VW1qZUhYWUZJZFM0MkdsQ0NpTXRrdXNDYWdvCjVSKzRjMGpSajJkeDJPMlprR2Q4T0MvenNCaFBZcGdEN0gzdmZmakRzdTI2M0E3YUh4Q2ttcHd2TXBaMUFjWkMKV3FnMXVFaDhsN29lS1YrTlRhamt6TUlwYmN4Nmp3QXdiNXptS2lvMm44L0dJWVpoNHFOL25pUFRQN21OTU9QZApkelZ1M21OT2ZMbTY4Q0NwL0dZMDZjT004VHZFNmhmTVF2TG1DZWxpWFQzZTJRWlBBT3phaUtKTGtZazJnUHQ4CmNQcHRla1FPblBwVmRKbHNRMmZEbWRING9jdC9BMlpJMjBPeWFPZEpidktjTlVFU3NwTHRFb01iQ0JOSnBjNVYKK3BOakVGa0NnWUVBOXFOa05PaG10dEN2VDZ5Uys1K2Vhc2hHODNTRkY5VFNsZ3dERTZSdEpvblhPdElQMmNsaQoySkZuN2pDdWNBYTZQOCtnZC9Db2xDVkEzYWx6Z2Z3ZVhRZlJYQUErUHRRTExHcjBuZk1ZbVY1NnZQekpQcGhECkYvcnlxUWN0dE1VUHFpVXI3SGRsUmduUXQya2F0Wi8vWFFpZ3FWcFUzbldFWHgwRit6RCswMnNDZ1lFQTB6bEkKTHlpaCszYUdjcVRvWDhMc20wWmJWcTRqVitLRTViQzNrMEZ0a1V6ZHh4QzJKZ05zdkMzSFJrKzdUZk1PTyt3SQpBYlNCRVpjRXlVUUZ6TVpMT0pEQWxvTTh1Y3c0UENxQWZOaDFQSG40dWNZejdEM0lRejVVWHNEZzBHc3M0VWQ0CkpiTGFzcGRNVnVOQVd6OTlHeUlobHZ1eENxWGszU21BN1pUVndwc0NnWUVBdG0yV29oZkFXYnF6NFcvWmJDcmQKaDBoS1NxdEdBcUdWZmd5MmZlSGlKbDVRaDU1MndQVlhtcTY2dkJEZ0JkYkVEb3pwdWEyVlU3YldhdDU2cEl1eQpmY2Raa1A1UkRESFZiZTVTcnozdlZRbndLVGVsTnhweWpoczlQODhpZkpKQ0N1emh0MDk4NWpnK1hGdHV1U2IyClFIOHdMdk8wMExNRnpVQnZleVA3YUs4Q2dZQTJaMXFnU3VidHplbHpQZVpjUStpTlZlSFF3YWw0eVc5UmVlTE8KbXR1TndTNmVSeitqS3Q2bTJXT3FTSDhGNU1TVnlvV0ZhdWlUajBJOFZManB0V2xLZUg0aVJrc3R6OXZzSTBaVQo0YXZRbDlub2Y1U0FGS213S0MyeStocnRrNjFMbVF6cEtOZ0xoOHl4MUhhUENocy9FZHQwOS83eHJ5anpqZTBYClJHNktZUUtCZ0E3OHpJaC9yWmFCbndHVFAva09oZUVlMkV6Skd6T25ibmpudnZRTXFtSUx2N3RYUG5GWFVNa2cKL0hraW1xQzB2S0lFLzhEU2Nvc2FjK1pVYmI3Vzk5MWFROEFGaXN6WFZtanRZZGxobjdjRE1HcjNlNVdNaWN5bgp1b3oxSEtVSkQrZ1FIblpJZnplaHJ4NGN3UmF4MWpFOHRXZDBMdnVwajY3TDhrRFRDN1RZCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
    ca:
      trust: true
      create: false
      crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURFVENDQWZtZ0F3SUJBZ0lSQU9NQWRqQ1dhWTk0YjMwcEtnMXM0QTh3RFFZSktvWklodmNOQVFFTEJRQXcKSWpFZ01CNEdBMVVFQXhNWFlXZDFZV1p5YjIxdFlYSnpMWEJ5YVhaaGRHVWdRMEV3SGhjTk1qQXhNREU1TURZMApOakV6V2hjTk1qRXhNREU1TURZME5qRXpXakFpTVNBd0hnWURWUVFERXhkaFozVmhabkp2YlcxaGNuTXRjSEpwCmRtRjBaU0JEUVRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBUEdhdGFhQXVjZ1IKQ1gzd3NVb1o5UCs4SnpkS2lzUlB5TEVKM0FNMTJyeGtJMkFtZ2RPaGFMWEc2RmpvKy95eDQ3S0JjN2hRVGNsRwpnbE82TTIrRnQxYzg1QitFeG5naFVLaDJldUd1cXJTWlBybElka2dFOTFNMGl6QTNra3J4dEo4VmNVdzdSQ2w3CmNPZ3A5QTBCQUdlSTZtQTZ4ZHlsTkcwMERQMHJ0SGljZlliUW1tWFJGV0ZvRVFJanJIUytOUjV0Ym0xdUNwdWIKODQzM3pyTy9pM3NjMWRnaVZSS2tLb2tEalI5aSt1MDVxcXhnRlNDY1dma0RCaXg0YzdUK1ZlZ003dDJjYXdjSwpGcXM1YWhpVUhjczF3b0x5ZS8rb2I3UENNR3VzVlNLU0lEMmxXQVp3cy91TndUeUFCN25PSVM4TzVOVUhmMkNHCmlrc0srQ0k2azEwQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUIwR0ExVWRKUVFXTUJRR0NDc0cKQVFVRkJ3TUJCZ2dyQmdFRkJRY0RBakFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjNEUUVCQ3dVQQpBNElCQVFEZm0rSlNyYVRIVUd0YkFHQlZ0RitCL1hVNWxDdFptNHdieXpxby9rN0JITENrNWR0NEwxRVJwVTF6Ci9YWnB5K1piMVVaVC95UlJLQjQwdnhYSVlPNnlVZXlXNjRTSkE2YnJoYkt5SlFFOG80WEtETkFDeW5Sdm5wK0oKeXV0VFFMenVVZVBOdjUveGl4YnVOck1CYWhNdlA5eWpUaVRVSDE5WlpLbnI2UWpEOWJIZ1dMQ1pXTjMzcHhIdwo1MFdLTkg4dzg4Zk9md0lTY0xQQVFsSGhYTzBJMnkxakE1TTdVVzVLa0N3MGIyaGhzN3NWS3NnMHNwSjJFOU8yCmJRblRicHZaZFM1RlphTTYvdnVLeTBlSlRZalNocldwb1pNcWhtOElGcW1sRzFJbDF5VE5xL0FVb2FCeUJsekoKTURUaVJ3K0JyTWkyVUJQTGxIdFFsbG9LY3JSTQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBOFpxMXBvQzV5QkVKZmZDeFNobjAvN3duTjBxS3hFL0lzUW5jQXpYYXZHUWpZQ2FCCjA2Rm90Y2JvV09qNy9MSGpzb0Z6dUZCTnlVYUNVN296YjRXM1Z6emtINFRHZUNGUXFIWjY0YTZxdEprK3VVaDIKU0FUM1V6U0xNRGVTU3ZHMG54VnhURHRFS1h0dzZDbjBEUUVBWjRqcVlEckYzS1UwYlRRTS9TdTBlSng5aHRDYQpaZEVWWVdnUkFpT3NkTDQxSG0xdWJXNEttNXZ6amZmT3M3K0xleHpWMkNKVkVxUXFpUU9OSDJMNjdUbXFyR0FWCklKeForUU1HTEhoenRQNVY2QXp1M1p4ckJ3b1dxemxxR0pRZHl6WENndko3LzZodnM4SXdhNnhWSXBJZ1BhVlkKQm5Deis0M0JQSUFIdWM0aEx3N2sxUWQvWUlhS1N3cjRJanFUWFFJREFRQUJBb0lCQUU2S3BjeklBaDA0OUtYOQpiaFVSMVNTaHpQbmJnTHNLMk1vODAwb3o0clRsdE41WUJsSi9JV1Fla24vODFaWXpXanM0ZkI4SjlBK2ZuVlNNCnJwWHRtVW1CNFFNaURjY1Z4WHZPY0dvWGR5VVl3RnhKWXpKTWN2NllrVHNPaGI5WlRnZDlXQVNaSzdKMGo2TFoKcUozbG1uVU4vR3RtRDlhSDJrQTU4Sk1JOXpWUndIMFBkR1N3dlNIRUdXaWxsZjY2V2pPdkdCREpsYzNMSklOMgp5ZGJxYlAvMUtzNkdpTkVLUnZJcHROeDFjdmN1d1RWQWZzTlNrSGxQQ2ZEQUoyc0ExK0N3Z2pVdElXYTlzN3dlCkRETjB4VER6cVdPSHAzYWlTZTJabGZnSExyZHNEVjBRWEJsSkJIcDZyMGpnbFhXeWFhRTNqcXFZL1BXQUpTeU8KcVViY1JWMENnWUVBL2dFYnQyN05SakIzVmNncVoybmFaMExnYXI0bUxRbEF0VEdCMGFsek5zaXlZTGUzeDJaVQppMEJ2enRwTkp5N0E5Q1ArNWkySUVoVzhNVTFTVkN3bFg1a2ptT1lTbWUrTDNFZW9aNkpzZkJGS2RsWExyaldNCm5TUXZYMklXL2Npa3k2K1NTQkpIdFU3eG4rdHJJMGtZM2NnR0F4TFZiUzBTQjRXVzcwVVRRb01DZ1lFQTg0Q3AKR3dGdVhuYWhVTmNZTGRZQTRqTkFjNk9JaHo2WUJFRzR4UDFGQ2NYWCtVczVtS1lWNi9iTStaYzE2cW16QlpMWgpYZWo3WExhRjZZMjlXcUNOUm1tSXdMVmYyWi9vdFRHM0FCQjJ6eU5OQk81enFIUFROeCtzdW1kdEdsTzBvU3JXCmhpS05aeXZML2hkWXROUmszRTljYXhBbHN6SnJwWjhFSk4zbmJKOENnWUVBbjZGTXJPdzZuNmpuNW9aRWQvZGoKWmMvMnY3Nit1VUQrWktFM1orOXBVLzJ2ZE84ZzFYVHZIeENnODh2bi92NzREcmJzZy9ZTGRPb3Arb1lRZm91Nwo5U2VGNHBwOUNEY3VtNEtCU0pnZ081eVdRbVpLK2pIM0srN0l3dFlmZ3VEdENJRlBtbkc2bFN5RzE2MFpDUFR3ClpybEZaZnNaSEdMZDJOSlErQkJlT1VjQ2dZQkgycUNNR29rQ0VRbWJQRTJqUVBJenphSG9QY3FNOWppUGtRRkEKQitpMmNJNUJ2eVA0MnBHL2RxMlh2VG9veS9qSzNVR05SN0hjOHZOakx2TkFhZjRtV0FBRnRiL2FEU2p6UnY5VQpZb2RjcW5NUTBIaUtyZHNXK2g3VFJxL1lRL2thVWZUSjBpcGQxbnUwdUJqeUMzYlQyQXRTZ0lwUGJjSjhOZ2RZCkJhOUR5d0tCZ1FEVnR1dDhFa0pRd3NTQ2FwcVBwUTJVMy9XZ1FxeWtONFlmVUVucGtHcEF5RzRqQnZCN3ZJSkMKeUc1WHRzNUJrYkppYU1yUmIwU0lFM1c0dHdTVkcvVGhBYkMvQmRKMTZmNk8yQXpnTG8xZXAvblZOWlRiZlMvVAo4QnpmanJZOVRkZlhzVWNQLzRhdG8rbjdoYnFOTE9ic0dma0NPUmxjVkZRQ2xwUnNIaTVYb1E9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
  # Certificate to crypt data protection keys
  dataProtection:
    create: false
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvekNDQWVlZ0F3SUJBZ0lSQU9Da3A4TGFjUk1KSWJZZGVWNHY0Y0l3RFFZSktvWklodmNOQVFFTEJRQXcKSHpFZE1Cc0dBMVVFQXhNVVlXZDFZV1p5YjIxdFlYSnpMWEJ5YVhaaGRHVXdIaGNOTWpBeE1ERTRNVFl3T0RReQpXaGNOTWpFeE1ERTRNVFl3T0RReVdqQVdNUlF3RWdZRFZRUURFd3QwYUdWcFpITmxjblpsY2pDQ0FTSXdEUVlKCktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQUpmaXJhR21Ycm9Wcm5VNUhQUkJpVTFpNEZFWVlERWUKYlN5emcvdGpYVUUrUjAxNGluSHpkRkZ5aGdZVGV1VC93eHBpelJNVnh5cjg4WWhlbmlDS1RXajdQV216UElCUApYazBzWkNydmhLNlcyWkFpLzRGaURYelpQeEI3aXJtQkNiR3RJTlBCL3dDMlJCSE9mQUdkamtWSVBCem5oazdhCnAzb0puZG9ETS81YlRualM2VG9ydy9abGVPeUpOLzgzdy8yVHltRmxRUDNDSjZia1NCUU1qZE1zNnVpK2FyUEgKS0R0YUdLTUdHMWJxVEFIMUQyQ3JFNWo3ZlJKQW9iZnhsaE1DaVlIcFB3bXZhUDBsWWtkUkd6Qm9CRXVKUml2dwpMQ243WTlOMVl1akF5VHlFWGFoVVl2cXd3OWFoQjJuaDZkOGhKaUtqR2t3YXE5MTlVVHhEejYwQ0F3RUFBYU0vCk1EMHdEZ1lEVlIwUEFRSC9CQVFEQWdXZ01CMEdBMVVkSlFRV01CUUdDQ3NHQVFVRkJ3TUJCZ2dyQmdFRkJRY0QKQWpBTUJnTlZIUk1CQWY4RUFqQUFNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUExbHd6eDREakU2MG1vN3dqWAoyRTdpV1Y2SmhoM1NQbnJxNTl6T3gwQmFmYnpaNTgzaGlUVEdyUmRHbVcwSGo3MXVVME5NYm5nTURFN1JSSm9MClBsVVNlY3VrZ1B0cGk0SldvNGdLNWIyQThpcXZkQTZYcVB6dGNwM1MzVmxKc09GYWR6Z3BtRU92UTg4RDdQa2oKYlpzVHc4eXI0VnBDMGEwbWRTWm12TUxOMHFNUVg0eTAyVVFDUDl0NlpBckRLeEUzYkcwMldxczRkQyt0NzB3bApkQXBnN2N0eEdtVERZRFhpNjFUL2k3Qys0Z0FxTE1CWHJHUURyelZzM3U1NGlHald1T0F2NWl4bUhaWmY1ajZ5ClJaUVN4Wlg2dVhDU1lhSlE5d005NjZTNXVpYlpVNVlCaWZvRDJEM1ZnQWVvM1lvOFlJa1orc3ZBWjBXbFo0Y08KKzlOVgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBbCtLdG9hWmV1aFd1ZFRrYzlFR0pUV0xnVVJoZ01SNXRMTE9EKzJOZFFUNUhUWGlLCmNmTjBVWEtHQmhONjVQL0RHbUxORXhYSEt2enhpRjZlSUlwTmFQczlhYk04Z0U5ZVRTeGtLdStFcnBiWmtDTC8KZ1dJTmZOay9FSHVLdVlFSnNhMGcwOEgvQUxaRUVjNThBWjJPUlVnOEhPZUdUdHFuZWdtZDJnTXovbHRPZU5McApPaXZEOW1WNDdJazMvemZEL1pQS1lXVkEvY0lucHVSSUZBeU4weXpxNkw1cXM4Y29PMW9Zb3dZYlZ1cE1BZlVQCllLc1RtUHQ5RWtDaHQvR1dFd0tKZ2VrL0NhOW8vU1ZpUjFFYk1HZ0VTNGxHSy9Bc0tmdGowM1ZpNk1ESlBJUmQKcUZSaStyREQxcUVIYWVIcDN5RW1JcU1hVEJxcjNYMVJQRVBQclFJREFRQUJBb0lCQUMxWVlabzNQMlN6QUdqQwo2bUFLQ09IdnVTUzg4RXI1MklKVi9mdFppUWZuZmdZbERNQkVmTitzSDFORkVaVzR2aGpza21rMlFVWVdTazM2CllaODVheThDZ3kxQmM3aWkrWFowNEZycE0yV2taOFBlandXanJuOHRwT1JZM2V2UUdJTFJPMUc5UTFLRkdBRncKOGhqUlh4NVVHSTVRbVFxRndTWndKSTVvRW1mSGlRRXpra1pBUy9GS3c3NU13anpzRGJRdC9NZ01rb1dpcXBRWgpLdmkxWExUcjlwOTRNSmNQdnp6MzVlTFpTUlZLc3NINm5ZSUp5bS83aWxsbHVHaHI1UzlNczF0eUg3ZHZQN0lNCi9pUTEvSTEyMXpMWkN5am1VSUZpcWNXdnNSSkY4bkp0YUN4bWFwZ0pxM3RSZDNlcUFidVhRQm1hQUtKUFZlMnQKRitmMWtna0NnWUVBdzVuQXZNL3NvcVl0NnJIK2phRU8wYi8wZytGN0RkdzlJTERuZitnR0picHVCanJ4U1UvNApPSmduSmJKNFNTOUl2a1drRWtFSlkzY3J2S1VQeHFCMFlSVmplcnQ5NWJwaGdSSEVKdHNiSTFRNjRLWmxndkF1CmJqK3I4TWJpR25saTlmU0tSdWF4bGJzV0dlVzZQNFpYWms2bnpPdnhhdlN1MFc4dGpnaHBrSThDZ1lFQXhzazkKVGhHMm5DYU1iallqanFKU3g4c2RvSmhXZ0Q2dVpVL25TTHgzbHhja0F3UE42aWpMb3BCWDR3VVVsaERlTHhQaAoxYUN6V0ZlSXptbi9XVXdpZzdBZEdZQ0JjZ3RPd1ROQS9hYWRvcHpIa3J0TStoVDdvZ1kzVld3c2FFRnR1ZGRUCmhkQ3piblpzSGhaUElMMXlsQWQ0OWNQRGVkbXZhbDN4ZkRpNkFnTUNnWUFNaitaWitmeVhvWmFYV1NFaEZYUHYKTXFYUWhuMnhzVEJYMWlTNENUM0QxSXBXYWhpdS9helNiYXN0OTUxVURlNWRFZm5zbGpLMUthVXNjMmxrOTA4aQpJUTZIaGwwYWtQTE1LRWp4dWVhdlNTeVMydnp3QU43cWc3cFdOMSswRlpHdWZDc1pUSjJoSVNmVk4vVFRPWnlKClhJbllWbHJsNUpzSnBsdEZvUEt1cndLQmdRQ3YwWnY4YWVSV3RpMnM2UXVJQTRBdUlET0RNRm9Kc2VienlybG8KOXZEYlhPZElGMXhRQ0djYjBJazdUT29KVkwvL2FabHNKbWVaOGtvWkwxMWZNTnl5RnRtV0RiZndFNXBEZlQ2MQpXbUhBU3VTbG5pNFdYdXExUXNROE5LSU9VQmhwcjg2NjQzMWdiVE54WlEvMWlEcElQVmU2SDd6TUVFSjdWTDNhCnZoMmUyd0tCZ0dDMkI4U1h4TUNla213eTg2bmh6YS9hc0t3SHprKzFmaWRnYXQxazk5Q2VLSUIvRlJKV1ptcGoKS0dyYmM2YTkzMndhaVNxMjlzVHhFdGs5SVlhcHBCTWc1L2U2cFdjZ21iSU5ENEM3aEZhZVFFeDdGU2M2Y2tvYwpmRnZCMWhPL1FMZnh2WmRVaTc3b3BiQ2lvV3NWUFFKbWcxR3daeC9aOG9ldWEwWFcrZHc3Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
  # Certificate to crypt signing keys
  signingKey:
    create: false
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvekNDQWVlZ0F3SUJBZ0lSQU01MDA4N3J0bkhMRGlVY05WZG80aVl3RFFZSktvWklodmNOQVFFTEJRQXcKSHpFZE1Cc0dBMVVFQXhNVVlXZDFZV1p5YjIxdFlYSnpMWEJ5YVhaaGRHVXdIaGNOTWpBeE1ERTRNVFl3T0RRegpXaGNOTWpFeE1ERTRNVFl3T0RReldqQVdNUlF3RWdZRFZRUURFd3QwYUdWcFpITmxjblpsY2pDQ0FTSXdEUVlKCktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQUxiYy85blorMXNjaERkRDVQR0dldktpK2J6ZDJIZUEKdjZkUHhyNUdQeWd5eW92RG1YWi9SbDQxU1BXak5wdFVNU3BZbEZnZHovcnVRNmhCMzVKQjVzUUR0T0paRHZMZwpZeWVJcnd3V0xIbk1XTkhOQUR6cTFmU0NtcWdIWWJqN1A0T3NkMVBESnBpc3JyYWxUK3JmcG9HLytVSmhuUXFvCkJMd2ltZUNMNjdMN25oRjc4ODgzVDFUdnFFMldMc08zK1FXY1BJb0VrZXBONHpzN21WbGdQQ2NQTUZkTHd1UVMKNmtVVDVIVGdHVjdZL2NRdExBbGVlVnNpenFqMDRLcGJhKy9uYnlUWWlMNGhsN0VYMlp2blhVWDJ1bytVYXd1dQpESUhTNWdwNUQ0enhQWEdFYTZsRi9nS2gvajRRUGdNS3YxNmpxRm5ISG8xY2J0c3VxOWJxMW9FQ0F3RUFBYU0vCk1EMHdEZ1lEVlIwUEFRSC9CQVFEQWdXZ01CMEdBMVVkSlFRV01CUUdDQ3NHQVFVRkJ3TUJCZ2dyQmdFRkJRY0QKQWpBTUJnTlZIUk1CQWY4RUFqQUFNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUF6a294V1BOL2dGdjQ3NURBaQpvWmhVNzRJZGpHN3k5MStjK0Y1VDZ3d2NoOG9VNU5DQ1U4T09TK0tQdWppVXV0dUpUNEtXRkVFZTBJb0FEMlA1Ckx3U2xIMkpINytnTCtxem1obmtCZ0c2UFQ2VWhQTzVGalQzNG1EeWI3MXVLNjYrWUVsUlovR0syVkJ1U29jTlkKMGQzVVI2ZmlYRjRRN3pwdk1raW9JTHNGY1JxV3g5Tytod053K1Y5c0dQUHBoUURiejV6VjhGUEs2Mk9JTmYvYQpBMGJzams5dXpPNTZPcVcrT3ZvTGNvT2cyS0t2Szdra24xNWJBYXQ1ZDBPalBZODkvZWUvZC9tcmcwZDVvckZDCjJsR21paHh5UXpxbkl6YkNVUFcrQkRoODk2bnVEV3BadkxRWTlQd1UzeHg5Z01aeDhST1ZudlR0amJzaFA5NncKSEtWOAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBdHR6LzJkbjdXeHlFTjBQazhZWjY4cUw1dk4zWWQ0Qy9wMC9HdmtZL0tETEtpOE9aCmRuOUdYalZJOWFNMm0xUXhLbGlVV0IzUCt1NURxRUhma2tIbXhBTzA0bGtPOHVCako0aXZEQllzZWN4WTBjMEEKUE9yVjlJS2FxQWRodVBzL2c2eDNVOE1tbUt5dXRxVlA2dCttZ2IvNVFtR2RDcWdFdkNLWjRJdnJzdnVlRVh2egp6emRQVk8rb1RaWXV3N2Y1Qlp3OGlnU1I2azNqT3p1WldXQThKdzh3VjB2QzVCTHFSUlBrZE9BWlh0ajl4QzBzCkNWNTVXeUxPcVBUZ3FsdHI3K2R2Sk5pSXZpR1hzUmZabStkZFJmYTZqNVJyQzY0TWdkTG1DbmtQalBFOWNZUnIKcVVYK0FxSCtQaEErQXdxL1hxT29XY2NlalZ4dTJ5NnIxdXJXZ1FJREFRQUJBb0lCQVFDQk9WSFF1THRwR3BEUQpvVGtqK1QzZlE0NnFpamVUMDdjY1hFTDlhWlR1S2w1NlFFS3R1Nm1WbjZBc2ZpZHp3eDV2WjJPRmxhUEpGeUZXCndSNW1OQTRJelBuQnp0L0NnUkZ3K2FXQ0xCVklDVUZuR2JDbVcrblF2WTdmV1VBVXdmQ1RjNGhyK0FmSmNwYVEKMmVmTStqbW5qV3R2SHA0a3pyRng1aDNKMGZkQlpsN2I4RnRhUDdRL2ZEZ3dDQzJJOGVPQ0ZyN1FIK3pUWkVQRAp2QVQ0RmV0aHVzemUxblNGaU1VSXBoQ1EzMlBQR0hZbklKN1BGUyt3S0JOenFWbFRnQUd0STJDaWhsT094NVA2CjI2Z2diL1czSHdwSnNqd2NBcG9VSnhIeXZTaWcvRFBCSm8yMDI0V3FlVjlCMllLU3ZKK2Q1RHpWUGlYekluQWIKUklFQUE5S3hBb0dCQU5NS2lQYlhpZDRWbzJFaFY1T0gvbW1wU1dNcHhyeTlHMVozOVhaTnV2Z003bHRIZ3VpcApvUUpNQ0gwbW9hYU42ZVBTUG01cFY1N1pDRngyMG50My9WL0liQnIrNEd3MitJem82aHdTZzhOVUpRUW4xS0E2CjZqRU9nL21xSmx4Uzh3ekkvK1d1MnBvZnB6WjZDdGl4UFNpcW9NZWlTaFJnVmZKSDVRQ3lqV2tOQW9HQkFOM1IKdlQ5Rjl2VHZsbG1JdmRJeStsTVBZNVpXZmdacmxONVcxYWhFQnh1SzNOMzJqZ2FUaXZXcS9SbzVPUUxYTytVZQp0KzlUVUk5V0h4ZG9CNVM1VTlxRlk5T2F1VFpkQ0ovQkNKS2x3REFhQUM1TGd1UGh2MW9MaFduMjZxS25heGl0CmRTaExTQlVjM1U4Q0p4UWp4M1pPL1ZHTWtueGRGSWZyYkF4NjloNUZBb0dBRVpBWTRlSUNHVGRYeDJlTThEd3IKRWdRQ2xYd09pL3A0NGZOTnZEQ3YxS0RPM1UzUU9TaVV1Nm8wTXFZYVlkQUJuUElNUEFnTVFLM3pJaTdKU1hrcwozdUhCRFdZVXF5elA5bm9Uc1k1ZzVNcUY0aGltZTBjcjRqVkJDbS84alVaaDc3aHlnMXpQMkcrMTdMU3ZYbVV4Cm44YkRacG04N0lFdjVkL1IwUU1LL2FrQ2dZRUExUXZhYVFnb3prM0RLUkZseDVyQXhMLzJGWEhUTHhWcThUV1QKbGo1b1dUTEJPY3JSMUUwblhSY3lhMXBrZ0c3N0R1KzNGL3o4VmY4UWM2bXVCbEVOMGNibC8xb080OER0UklyaApVZ0F5bThDTlJlbXV1SEtkRjc0VEVKaGYrWU0xSUltUkNmZHNMeUwvQ0NCNEtpYkhMOEZrR2t3YWNhbnd5eTc1Ckl1K0NyY1VDZ1lBcW1OaU5DbU05WW1yQ0U2NGFrV1JJVzVlMW1WcmVVTEhlOTl6ckhFYW53RVVXMVBhWjJ6Z0UKNmlLN1dEcW1FVkhabWRXT0FEYXduVkJpdnppUkhOMjBiczB4MGsra00vU0Z5aWFlWmM4T1o4ek5OdVl3QWV4MwpyeFpMNTdtZWxLdUEyeGIvVXdsZlcwTjVFczJQaUlnTndTa0NRM1BBampROElDVHAzQVNEUHc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=

# Kestrel servers cerificates
ssl:
  create: true
  crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURwekNDQW8rZ0F3SUJBZ0lSQUxVbkJUSzJxcDJUdEZqSTlIYzNQcGd3RFFZSktvWklodmNOQVFFTEJRQXcKSmpFa01DSUdBMVVFQXhNYllXZDFZV1p5YjIxdFlYSnpMWFJvWldsa2MyVnlkbVZ5SUVOQk1CNFhEVEl3TVRBeApPVEEyTkRZeE0xb1hEVEl4TVRBeE9UQTJORFl4TTFvd0l6RWhNQjhHQTFVRUF4TVlZV2QxWVdaeWIyMXRZWEp6CkxYUm9aV2xrYzJWeWRtVnlNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXlUS1IKRzZlb3REZE0zYzg3WTVyazYrZlVIb2kzWDlGb0FyOU03bnF2SFdRVWN6ZU53dGQ2cmVUQjhIOE83N2FrUXEvUQpNeWFScHN3MkN6M2ZNTWpSRjhLTFAxNEJkMVlCdkV6NnBMM3NBbU1WOG1uS1FBaVpOdnRObFJSYngrdEVMSFpvCkFEbXNVblBhenE5Y3NPdHBKUWtwTlRSNnJuSDVGdXdEVkhSNG1veWczYUUzRER4UEUvTStXdXVxTDhZNERWUWEKNHh6amU2MUk1d2FqQVYyRzNLWEFtV2dIRTNqYzlzZE1DMmMwZXVrL2lQYnpPMkxoMmxhcGRCemtkSGtDbGhnbQpwTkcxYjlhK1BRQkZTdHlNSXBlVTVHUXR0TkpwenplamtzeXdSY3FFSEdzUWM5RUkrOS9wRTYyTk42bXBGOG4rCnIycGM2a2F2VGRRbFdLTFBOd0lEQVFBQm80SFNNSUhQTUE0R0ExVWREd0VCL3dRRUF3SUZvREFkQmdOVkhTVUUKRmpBVUJnZ3JCZ0VGQlFjREFRWUlLd1lCQlFVSEF3SXdEQVlEVlIwVEFRSC9CQUl3QURDQmp3WURWUjBSQklHSApNSUdFZ2hKaFozVmhabkp2YlcxaGNuTXViRzlqWVd5Q0ZtRm5kV0ZtY205dGJXRnljeTVzYjJOaGJEbzBORE9DCkdHRm5kV0ZtY205dGJXRnljeTEwYUdWcFpITmxjblpsY29JY1lXZDFZV1p5YjIxdFlYSnpMWFJvWldsa2MyVnkKZG1WeU9qUTBNNElKYkc5allXeG9iM04wZ2cxc2IyTmhiR2h2YzNRNk5EUXpod1IvQUFBQk1BMEdDU3FHU0liMwpEUUVCQ3dVQUE0SUJBUUI4WjFqeDJKNk9nakdGSnZHV3ErQW40U052a1BhN1V0cVJ0UmxwRmlydVZkMitselRJCnBTMy9BTllXNndlbUMvTG9PbUlQaU44NGNBQUhiMGlmam1Ha2ZXeTJGc3puNU5TSGx1aE1rUlFxMkl3MXZSMjgKSG5oaDZxejhXeU5wT1Y1TU1HMEJNYXdmSnJKZ3BuM3VrVk5VSE10Sk1xaE93QkxrNEhHWGZUWnhRMytPUThyawo3ZUtVN2Y3OUN6VTlCMUpJZ2ZIckp2bnAwVk02MnJ5NTB3UklwT2RablFrU1R4c3BOWGsvNWZPcVk0djJ0S1BGCjVsK3BNWW5uUGo1cUZjV2xmc3k5eGk0Lzh5RW41aE1WUHQwamkyQjZrdE9jS0w5SkdrTlNPbGM2cFp6N0pkUHMKbUNaNk5aTG96aDMxU1VxOUVvdi9OOG9DdTZaZWpvallZQWNwCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBeVRLUkc2ZW90RGRNM2M4N1k1cms2K2ZVSG9pM1g5Rm9BcjlNN25xdkhXUVVjemVOCnd0ZDZyZVRCOEg4Tzc3YWtRcS9RTXlhUnBzdzJDejNmTU1qUkY4S0xQMTRCZDFZQnZFejZwTDNzQW1NVjhtbksKUUFpWk52dE5sUlJieCt0RUxIWm9BRG1zVW5QYXpxOWNzT3RwSlFrcE5UUjZybkg1RnV3RFZIUjRtb3lnM2FFMwpERHhQRS9NK1d1dXFMOFk0RFZRYTR4emplNjFJNXdhakFWMkczS1hBbVdnSEUzamM5c2RNQzJjMGV1ay9pUGJ6Ck8yTGgybGFwZEJ6a2RIa0NsaGdtcE5HMWI5YStQUUJGU3R5TUlwZVU1R1F0dE5KcHp6ZWprc3l3UmNxRUhHc1EKYzlFSSs5L3BFNjJOTjZtcEY4bityMnBjNmthdlRkUWxXS0xQTndJREFRQUJBb0lCQUhoM1Zuc0FmL3Fud2RadApabG5WUEl3ald0YU5kWDVobTYxSmJYNjg1bXpxcDNQMUoyUXFNTUk5M2dGcGtqL2xVNlM2TUNid1NQVmVBRjNxCnhlQW4zVW9rcWN0Zk5mR0dCYlFCUTNHd1pjZG9ISlB3MDdCVGRhbDkvbzNzaXFmQkxpaVJIT1JGby9BYWZrQ1MKcnlVZlR1MWw5czVzaGFnOWhhODcwU0tZT2o0T05jL1pRWWV6bURkSHR0cTRZVmhGZXdtT3oveUpnbWc1cDZlUApSQVAwM3doajgzbi9ncmJPK0ZzYW5tWTB4YjNmamowb2YxYmNhRGhYL21KdHErN3hZdzJ1ak9EUTk0OGhJMmYwCjF5dEhQNzcrSWRMOFppbUdBVDVpOWYzNkhML3NOZXlWNllBK2txSEoxbnZpVEhyWEJ6Tmp6TEE5eHN0OVhnR2kKVThSUTJNRUNnWUVBNTJZRDZPeGJZUnU4QlBuM2RtKzRFYmxmbS9LeG1ydGdMQlIwQTNZTkc3L0dHKy9GVm1zWApWM2lORW56T21uQmtqeGE1WUpOZVdGbG1hMGwwNFdjMWxwZ2V2RVQrZ2hMSndMS0JnN2liN2ttYnYvSTRJazNECkZ1UW4rRnRFRTl4V2JuVTBhekNVN3NtR2xDU2ZITVo5a0czc2t0Z2JwcDdoV1VEbWwzalpnSk1DZ1lFQTNwYVIKK0hqSG5mNUZPVUlxZEhhdWRmcUo2Uk00bk96TFVCRWErZ1lDeWpsTWNBUEFRSUpGSW5qVkVVL1hUM0VsREIzQQpJSVJ6WmU0Zk9UNnI0b0dkczBxODIwVGJJWjRoRVZDQ05OeWl4UE5hdGYweU1oY1RPR0JPOHQ2ejZZbXpuYWpPCmJtdlc0a3dNM29hZHBwVmUwRFNzMUpBMDFOR0FUemhNQ2J2Wk1VMENnWUFzRHJKajRNeXRPcGliNGZRSjZzK0QKSUdaaHpOMmY5bGtqUzJtalZ4QzczZEdjZEJTQWxiZEdBai9wNnpWekZqOHZOMFpvYXVhbHI2L2VjWWY5ZXFjcgpXeDlPL1Z2djdCL1p2cU1HTDFvUkRwYkcveGxNL3IxTVdIaDd3dlM5UzFCeGk0TkZmV1I5Nm9UakkrM2Zqck5OCmtvQmVuU0wyb0gyTGZ0M29yU3ZNWFFLQmdGWW1KcWJwY0RFSkdaZTRzUi9VVTErY01VWkJSemNOT3Y5cEwyeTMKYU5zRjVEeXladlZRdGh0S2N3UzVSeGNiTG9DSy96SldzU2N4UzJwbmhEVXRmM0RHSzJRZU9VWEFvd0hGakMrVAplWGdLekFBRjJDaWszNjZCTCswMkhxSHp4czN0YU1BNkFyZ2hRUlhiT2ljZ1Jzc0VxQ081RUltUjhEdzVDTXozCnBHODlBb0dCQU9UYkhDMjF6UDBjSktyRmFxV1ZPdFdWVExIb0hPaU9tWHE2blI4akorK2tLaVhZVS84UzYweWEKMlZNbnBhK0hTNjE5bjc0N0RMd1lBWkhOcC9hcXkzZXg3OGQzVW44cGJGQUlBcFc3enhwS2JLb25HNUtGbmhYZApBQ1JwSmw1ZVAwYitNTkljZEp2UkJSVVlPdHYxQWwvMW9QeTN4ZDJsM3pzUzdwUytycXllCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
  ca:
    trust: true
    create: false
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURHRENDQWdDZ0F3SUJBZ0lRUzRtL2JNTGRvZWo3M3JoVTdjeHdJREFOQmdrcWhraUc5dzBCQVFzRkFEQW0KTVNRd0lnWURWUVFERXh0aFozVmhabkp2YlcxaGNuTXRkR2hsYVdSelpYSjJaWElnUTBFd0hoY05NakF4TURFNQpNRFkwTmpFeldoY05NakV4TURFNU1EWTBOakV6V2pBbU1TUXdJZ1lEVlFRREV4dGhaM1ZoWm5KdmJXMWhjbk10CmRHaGxhV1J6WlhKMlpYSWdRMEV3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ2YKdHc0SmlIbTZtSDN0a0tiSDdNZDQ2dVc2SXM2b3prSk9hZm51RlpaTTJMVnJ3VGgzbkg2N014SkZpd3ZEUVczQgorb1N4a0twVEdMenNEWGZJTDlwdDZ2c3pHbXJseFAzbUYwTnQxRzBqbjE3d0J3anVGZUNyZ3ZpdGxwOFBqYU93CldWYWpndjVhaTMydkFDWFRMMHlHNTVqQjJzRHZTNWZpL0gvaW92aDhqckoxcnd1SU1oUDNIYjU4UHl1VzRrT0wKMmhWNzJHL3RHR2k1eUI1VDdadG85cEFnNlhBY2ZjOE1WOXpRN0FjZExGcWFWK1dUNm9uWnNScDQrVTBKdytWdwpRY3djdlpXaWQwWDdiNXRBU2hIdzFCYy96aVhtQmo0ZFZBWUVxeGhIRnFJSWtnRllHU0F5Z0cwV0lXRXRQTmk1CjAxVlIwZG00SGVyQ0U2U0lhTzJqQWdNQkFBR2pRakJBTUE0R0ExVWREd0VCL3dRRUF3SUNwREFkQmdOVkhTVUUKRmpBVUJnZ3JCZ0VGQlFjREFRWUlLd1lCQlFVSEF3SXdEd1lEVlIwVEFRSC9CQVV3QXdFQi96QU5CZ2txaGtpRwo5dzBCQVFzRkFBT0NBUUVBbkkzWklmd1MrUk1HUjRKQUdWRWdoVzQzRjk0TTJjMXAyQWJmQmd5QzNnRzR0RjZwCmZBRXBuLzhwS1Y0SE84TVZ6bGR1cklHaDBORVRVMDJPMUpMS1lZMWdPSlhOUW5ucnBlajQ1aFYxVmIxQ3hmbnMKWXBiNjNIWkJUeHZESjRGQW1UaDRNSGxkdlJ3ZFhCVVVESk5sNkxxcmttYVJIWGdLdFJneDRUMzFCZ0JtWDMzdApzWm1pZm1PTzB0QjRMS3dNRUFEOWU4WFdRSlNFVlVxbFlZakltaGI4Yml0bDlXN0llL0dYM2orQ3M3ZWtyY0hjCnJIdVExL283dkxlLzJRTzA4WERFUDlGMFl4RlFzNS9RK21lU0xwalAzWUJsbGIwUUtnbnlCdzlhM3kwU0U5ZGQKYnZaMkhKVDVML0JqL256Nmo4Q05kektJS0RRMzFocU14NDZ6eVE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcFFJQkFBS0NBUUVBbjdjT0NZaDV1cGg5N1pDbXgrekhlT3JsdWlMT3FNNUNUbW41N2hXV1ROaTFhOEU0CmQ1eCt1ek1TUllzTHcwRnR3ZnFFc1pDcVV4aTg3QTEzeUMvYWJlcjdNeHBxNWNUOTVoZERiZFJ0STU5ZThBY0kKN2hYZ3E0TDRyWmFmRDQyanNGbFdvNEwrV290OXJ3QWwweTlNaHVlWXdkckE3MHVYNHZ4LzRxTDRmSTZ5ZGE4TAppRElUOXgyK2ZEOHJsdUpEaTlvVmU5aHY3UmhvdWNnZVUrMmJhUGFRSU9sd0hIM1BERmZjME93SEhTeGFtbGZsCmsrcUoyYkVhZVBsTkNjUGxjRUhNSEwyVm9uZEYrMitiUUVvUjhOUVhQODRsNWdZK0hWUUdCS3NZUnhhaUNKSUIKV0JrZ01vQnRGaUZoTFR6WXVkTlZVZEhadUIzcXdoT2tpR2p0b3dJREFRQUJBb0lCQVFDVVBuYTdCbi9tWUhCUwpOemQyemlILzdCZTdBMS9LYzFnOExFV2RaVkFTbC9zY3YwWElUK3VabWpmVmNOQkVOZERJZ2R6MGE1Q01mS091CmZubTF5Q1Q0Yldrbjc5ZFUyZG5JM2NMcWlJZWN6dXB4NURXM3Qzckg5MU1XM0gxYkZGN2c2cXR1TGNJbERPQmwKdEw5bkc3bnVaYnoyQWpPZWFRM2IwLzVud0ZqZ1VxTTFKQy9LR2I2cXVVeW16WmhGUTdyL3dEL0ttN1B2SWhQUAp6akZRckZ6TFJ1cTN5SzlaaWRiTXMvekZHWnQ3Y1BoaUpJaXprT1ZhYlE5RjBhK01ZOFRlTjJibGVpUVcwZDZBCjhXWFJIZWU5R1A1ejQrZmExY0xtTElTL1ZWV1V6ZVVtS1BHcjVPWE9rWU9vZGFmR2REd0d4aXNENU5VRjBLcVAKa0tUNnp4UGhBb0dCQU1GRFZSam9pZ3krZGhHTEUweWxNWTBjZ1UxanNDdS84dUFQMEZNV0Nuc1gxSVlydmNVTQoyOXNzWU5TS09aN0VZOWRrL3ZsYUZSRHgxbERWM2d6ZzQrZkJjUWNuMzVleFo2dHlOSTR1TXZybHUreGQrb1JoCkZrUmdZUmgyRWJVM05meFBsNWN2ZW9pVUVVNklpVmtRUUFnOURHbE9CUFgxa29qM2JWOThJN2xwQW9HQkFOT1AKekY4ZjdHZGtEWHNIaUxhU3NuaDlIcmxKRWV6eTBVU3VYcllIQzBidlo5TE1mb1QzR2N5b2d0a0FsU0dVM3AyMQpZYUYxU3VTQWM0ZkhsTTArVU5CdkJjN1h1VFpCVEtkK29sdGN6TDFzcEtmbkxhYVhjSG83RWZsWmg3L3Mwc2JJCnJ3aWNsL1BjcDVaZUpwUk4vWjdTeml0MkQzYW9TUGlZb1padTZHRXJBb0dBUEdLS2F6NzFLMmd6UWVYL2dMbzQKMGt0dXh6eDNwaVBTZ2xuT2tMZFpUUDYwSTd2MURtV25LRU1rZWlRNlByWkVMOS9abnhXYmNYRHVzdEV3RVR3UApXYkZpWEljRDRNVElqSlFoZ2E5RHRJc2xmWVFicTFNZWZ2elNPYTlpZHdtcUw0eTY0NzBzL3hHc21xb2txQlJnCnZYSTl0NFZ1SFYrK2lsY3M4R0c4VThrQ2dZRUFveERKUStERlJJUFg2Q1pNZC96bVZ2eUp1K0xZVUR4d2xIR2EKU3M5dkg4UFQwS1VTTjhhR09qc0FiK2FGREJkRTUyWXcxRlFsMzY0cVhsTzFHK1dXUUxIeVZoWHNpaWNXd0Z0WgpKUGFJVU5EMnNQdjlNZFMwTzJKZ1hrTmw0TWJYUjZUVFZOM3VPV2F3UGJSZ0pCdGhDeFFOR1c2c1NKYzVkM09kCnlPZS9jWFVDZ1lFQWowdE5aU0txZDBCcXdHaE1kZkoraWNlZWhsZ1R4ekFDYjUzVXNPM3loOHU2YmVjZ1RyRW8KTmRxRVRLZTRBK01JTnJxelg4QmZVWFNlN1VOeEQ1TWlJYitLR0xLTHNudkpUVk83bTJpQUZRRlluVE1TTDVMRQp2MTBBa3JzZWJLSmRUNDdUZWQwaVg4VndSNkxOeXlNMUdIaStzWk81WmN4ck02V3ZvLzVGTk1JPQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
# Certificate to crypt data protection keys
dataProtection:
  create: false
  crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURBakNDQWVxZ0F3SUJBZ0lRV3FTOUpxK0t1bHF5Rll6UEI1cFFxVEFOQmdrcWhraUc5dzBCQVFzRkFEQWoKTVNFd0h3WURWUVFERXhoaFozVmhabkp2YlcxaGNuTXRkR2hsYVdSelpYSjJaWEl3SGhjTk1qQXhNREU0TVRZdwpPRFEwV2hjTk1qRXhNREU0TVRZd09EUTBXakFXTVJRd0VnWURWUVFERXd0MGFHVnBaSE5sY25abGNqQ0NBU0l3CkRRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFPaURVTUpETG5tWTRDQnJkdHp6bHRiRDhDQVAKMEpETm9JZ1JlZkw2aXBmQ3JUcXdBNWZSZXQxN2xpdHlXTGpjNVlmSThCTWhMR2dobnhWWk5xNWJTQ3hEaHNMTAova1MyREszYm5CRlhJSTM4K1g4TFdpZ0JuZjZHOHcySDhXUlNxemlDTWloSnlNd1Z5N2MxNDhZdDMycU5pdm9hCmMydVJ0bmZUZ0FmdjhDZzY5VDMrOUN4SlVNeVdyMGp2WVlsTWFoNWpESlRiOWJBb1oyTjQrM0ZFU3BCSGR2Qm8KbXZWVzkvRlRvUjhvU3g3a05lUy9OMjJpTTUycklLbnVGbitFaUYyRWkrNGhOMzRkeEtlRkZTRXJnNW9iSWZIQgpTaGJwZGRGb2lkcUt4MnVTZmxlL29tWk83aHFqYXp1KzAxR1NwS0tlRUNaODBJcUlVV3Z4aUgvRXZkVUNBd0VBCkFhTS9NRDB3RGdZRFZSMFBBUUgvQkFRREFnV2dNQjBHQTFVZEpRUVdNQlFHQ0NzR0FRVUZCd01CQmdnckJnRUYKQlFjREFqQU1CZ05WSFJNQkFmOEVBakFBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFBaGxhT1k3aFdZdGpKSgoxYy9URGJpYW5pcmI1V2JXK21zVE9JRmhGMWdicTd5cHVIbG1pbDd0d3ZPdEFwQkpidnZJYTM3Z3NCY3hwS0RPClNLNGV3RlZUcWo5bUJoQUFvRmVpcUZuclF4WG9jQWRmbWRhL3hJWGxvVitPLzRBcEkzV3REMDBFMDFPQTZhelEKUGdEdDNqZTd5ekdldHRCNWhNUVBhdVBhM0I2Nk9xYklIUlFCT1lYWEMzYUtQTDR3Q1IwLzdaS2hzTWY5QVNaOApiWEtMYjFrejAwSkVkRXdoZElKblJ0dzh0OHJ4dXVSSjl3MCs2Vk5PLzdyMTI2YTNPLzZIYVBwSTFaUTRGTVY4CmUyQVNGbGxGYVkxYzJjRGtpTDFSczBxak5OYjJmZ2hQbWtZcGFDdXRLQWppN3FEWUxSTWZ4VGFJOTczdTFOK3gKNE8yUVVIVDgKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBNklOUXdrTXVlWmpnSUd0MjNQT1cxc1B3SUEvUWtNMmdpQkY1OHZxS2w4S3RPckFECmw5RjYzWHVXSzNKWXVOemxoOGp3RXlFc2FDR2ZGVmsycmx0SUxFT0d3c3YrUkxZTXJkdWNFVmNnamZ6NWZ3dGEKS0FHZC9vYnpEWWZ4WkZLck9JSXlLRW5JekJYTHR6WGp4aTNmYW8ySytocHphNUcyZDlPQUIrL3dLRHIxUGY3MApMRWxRekphdlNPOWhpVXhxSG1NTWxOdjFzQ2huWTNqN2NVUktrRWQyOEdpYTlWYjM4Vk9oSHloTEh1UTE1TDgzCmJhSXpuYXNncWU0V2Y0U0lYWVNMN2lFM2ZoM0VwNFVWSVN1RG1oc2g4Y0ZLRnVsMTBXaUoyb3JIYTVKK1Y3K2kKWms3dUdxTnJPNzdUVVpLa29wNFFKbnpRaW9oUmEvR0lmOFM5MVFJREFRQUJBb0lCQUhKdlJzMEZnWmNwTFkzbgpOaTRTMlRkRVlpZDFnU0h6Z2tIVjBCNU5QdTdvU3BmcXp5bm1XTUV2TlQ2VzNhSEdYbFdSQ005eGNVaWkyNGdIClM0bE90ZHZMTkVVbFh6UjBJUk5rVlpDWFFCZUIzVTJ3eWFPTkFEU29PSEY5YWNvRmdlMmk3b3F6bmRjTUZ5SkoKckp2Nk1jNWdjWGtja1pmc3RGQ1BVS0VYYnl4c3Y5THJ4TlRnM1JxQ0lQblJPaWJyVDRTWmxGSVRRczcwRUNNKwprUEp3d0p1RW9VL2JhTHJzLzdFbTg4MjcvUEVQT09KdklxdkpRRFhGMDc2a0NWcGxKKzlYM3M5aVdiOWUzSUNFCnltUTA1Q3JTdTVLTVpva1lUK3VlczA0ZldmVm9LelFpSFBZNmRZR0hnSDRuZVVCQ2J2bW9QMlFTcExuUEd3SkMKL2FmRE5jRUNnWUVBK2dHL09SaHcxdk1TckRqb1VsWGlXNDRzT2dVcmU3Y3VEd0czbXhrUFVIVkx3b3B1YmI3MgpoK0xsU0xESTd1bkxtRkFDdFBxbjRmMzhoUjdVSkJDeWlhKytzVVZvdk84TUpsVjVjamJsUUhNRi9VeXNSYTVNCmJieDdnQmM4VjRLQXVLSS9KR3NPcHViSWprZGRzaDVkNjRRdE54S010TndNVGhlaCtZc2hYcEVDZ1lFQTdoWTIKR1BiVXpTaW92VXFCQkFwa3VsVE9pTUNSTk9HbEZvRWRwOHlSOEpaTGNFd1E0dzZCTGd1UmxjREQvaXdnVnFVZwpKNWtFOERFbGh4NU9XbnIxb05TbURPT0YwMGs2Zm1WV1hweUlIbGdoN1JYWkE4TUh0Wmg1QXVZbXhzdkdHenVwCmpGWVppbnVHRlNBd3lLRENiSTl0T25tbHE4RCtpTXgvUGp1Y0ZRVUNnWUJMbE4yZndFRFU2eFdaRlhjKzlSSUMKeGQrZkJ0TVhpdENVM3RzSU83SkNpOE9Fbzk4d3RJdkpseEhrUVBYdUxLWk5mTnJrcGVhOVR0RFoyZkVlbWlHdgp1SDc1RHRmVVRweW90aXlLR0FpRXpJRmlDNTBGVCtWeFE0cyt0VWViMlN0YkprbmFrN2NSUkRJYnVYMmRETXN1CkdYNmw2S2k3UU05RGlLZUNUc3FlMFFLQmdRREVrQ3Zyb21XQVYvQXdENEhDcno0SUpCbzhCeGdiRzZ3cmp6L0gKbUhwb3Nmem9ZclNTY1JndnhyZFVkc2laWVI3MXlmQnBJTWxWOEkxMko0d3k0VTlIa0NqamZUaXdmc1cvTXJVQworYUxid3BHSDVzQzdmVm94RUFmZ1g5bGx5VGp1cE94UEE0cWtyV1Mrcmt2NFo5ajh2ZEZGTk1lVnJJbTRzWFRnCkVXREViUUtCZ1FDQ3VycTJQNmx4c25VVE1VcXQ5ZW9QaVVucnNhY1hKUFZhbkF2NHhRdGxkajdYR3J5SHdyNEIKUkVwTGFVYnVpR2gxKys0aDdQMVBJZ3l0Tndkc3lEQlhZOWd5dGoyMWNZdkhmUmlTU0JiRW5SU29sZlp5MGpiSwo1ZHlJcXhrd2tvZm9MTksxZTUvS3kwUGM3REJnZ0RqZTNLdk9tR1dldDdzVkJuZEpVam1HNGc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
# Certificate to crypt signing keys
signingKey:
  create: false
  crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURBakNDQWVxZ0F3SUJBZ0lRRi9pWG1HbUlnUHczd0pwdW5rRm42ekFOQmdrcWhraUc5dzBCQVFzRkFEQWoKTVNFd0h3WURWUVFERXhoaFozVmhabkp2YlcxaGNuTXRkR2hsYVdSelpYSjJaWEl3SGhjTk1qQXhNREU0TVRZdwpPRFEwV2hjTk1qRXhNREU0TVRZd09EUTBXakFXTVJRd0VnWURWUVFERXd0MGFHVnBaSE5sY25abGNqQ0NBU0l3CkRRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFOUGlINVRmWmUvWHVqRHUwTUhLaWEzV2doWGIKZWpZTDl3cGJFNnliWWNqaFJCeGd5bjY5N1BkSy94L05rN3IyRm4zUEg3bEVCM2Z2V1VhNHliZ3pXNjl0NVlNUgpEeWREbCt6Z2JLeWtkd29mZjNhSkdITWdBaGFHTWNtRzVkZWhZUUtOMytMRFZPL2VHVUd2QTRyZ2Vxc3lLU0F2ClVhbEtYc1ZBdU5PaFVIM25RVHhyTGM0NEd3NzZJa1ljcVRHWG1KL0tobHFGUDN0VkUxeDJSaVNnZDRZLzlHanMKZHZaQmtrdlhpRkt3WGZXMHoyVXdTQWR1Y2xiOXdSTHlkdktzTnVjT1ZkL1JQREZ3YUdqdDVwT0w5TGQ4K2JPZApFdGNoamt0YlFFZnhzdThUYURycTdFbFNLdFkwb21lc0FXRWRYSGtmaUJOTTdhNXU3MllRYTY1WUMyY0NBd0VBCkFhTS9NRDB3RGdZRFZSMFBBUUgvQkFRREFnV2dNQjBHQTFVZEpRUVdNQlFHQ0NzR0FRVUZCd01CQmdnckJnRUYKQlFjREFqQU1CZ05WSFJNQkFmOEVBakFBTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFDUFpTbTRIZ2xtOTV6UgpVVTVvR0VSdkRiakhxdkY5cG53RTRHMXJ0YS8vS2RrRFdHRWE5RXV2NEszWmUyL3NNTkdPYU9vZWJXcHpOUXZRCnNwZXZGNzV5RG90VzBjYVVMcE8wMlJHcmdrRlY3emgvam13U3JPZlgvMVBmVGgxYTZ5c0hpUjBQQmxRNDdLVHYKbkxydmE3enVGRUxCV3JHdXlDeGRwNFhGaTlvejQzT1BmZGMxWVJCcVhVd0xSVHdIT0p1aldtYWozYk5qZEtoNQp6OWlCYVR5aWFZb1hra0RWakpQZWQ5dVNVMXVsMFp6ZkVHR0JhZFYvNzIvTE5Zb3Y1UUU3SUJlS09BL0VBZnlyClBJSkphVVhuRTdUT0hIOTFteHdRQUZiUVhDOHlvMmNaVk0xOXlXRXJneE8zT3Z5ZkM1a0czOEQ2aTM1UGV4WmYKOFFzT0lUSWcKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBMCtJZmxOOWw3OWU2TU83UXdjcUpyZGFDRmR0Nk5ndjNDbHNUckp0aHlPRkVIR0RLCmZyM3M5MHIvSDgyVHV2WVdmYzhmdVVRSGQrOVpScmpKdUROYnIyM2xneEVQSjBPWDdPQnNyS1IzQ2g5L2Rva1kKY3lBQ0ZvWXh5WWJsMTZGaEFvM2Y0c05VNzk0WlFhOERpdUI2cXpJcElDOVJxVXBleFVDNDA2RlFmZWRCUEdzdAp6amdiRHZvaVJoeXBNWmVZbjhxR1dvVS9lMVVUWEhaR0pLQjNoai8wYU94MjlrR1NTOWVJVXJCZDliVFBaVEJJCkIyNXlWdjNCRXZKMjhxdzI1dzVWMzlFOE1YQm9hTzNtazR2MHQzejVzNTBTMXlHT1MxdEFSL0d5N3hOb091cnMKU1ZJcTFqU2laNndCWVIxY2VSK0lFMHp0cm03dlpoQnJybGdMWndJREFRQUJBb0lCQUI2WnhNZmliNzF3NFpJWgptNHF4YnFydGxRSUZIYVJhbkFZaDJ6aU5oRlRYdTllQlh4MW8zcVZrYm00d2FZcVI2Zk9uaTBSZGY5cWhkYnBTCkM4Z1Btc2srVE94ZDlWdE5WczYrSnRQVU9PRDhaWk0vLzRqNDhYUkJVMFZ3dHhjcVZuRmcvaG1vN2tacVJDbUoKVmpDamRQUHVuYVBwVVpqcWhiOWxOb3hSK3VjRDBLY0diQWRJcjlOQ0YvWi9HbWRNVHZEYnZZdzNiZHpnR0E1bQpiU2R1L2s4aXBldlpwQVE4SGZVeExJa2EyakcvTXNqTVNSUVpqMU8xRXg0K1M3V1RFOEQwcDllMWYrcnRwZ2xCCkRBK0wwaTZUb3RKMFFDdlVKVWUxZXZVYWN3NkFrMzRkRndPc21VV2RvalY3OXMzZDdNTlpKejRHRDFFMG1uMW0KTkdrMW94RUNnWUVBK2MyVW1WU2J5Nk1uVmZidE1zZVgwWEJXUVdKek44Z0ttU1JmcDVGQzVzTVBOaHNqb0FJYQpWNXFhRytkRWdZNENUTkZuamVuTytRTXQ5QWpDWDhMRTdYd1lUdmEvRmY2VHYvem1GaG5DVHRwcGl1THVWTmNZCnlKTDY3WEpaRSsvd2tTVFp6VnE3TnFPNGxDTVg4UExWdzRmUkZtVDdLUXRKNDJ3cVZINktTQjhDZ1lFQTJTTzYKQkZLSkRNQjBxeUk3UWZ4d2dPbW5paUVnNEhKb0E3MWoyY2tNd1laVjlXS1lkTWJEeGEyNFl2a0FnTld2MkZmdApXaDJOTktYVm51cUJMY1pmTFdWdXNHNW5Scm1EZ3d1djBtZzExK1BKMnEwZElaWEk5eXFGYWY5ME5pTDd1dmMzCnI3aVdWVkUyYWhiZFB1QUZDM1BJa29uTU9rL0p0NTNQM1BGOGM3a0NnWUJkME5TZkpVU0JuUnUzMEUzVEJWekMKSHFOMldPZ1dxZjA0K0kwb0hJajRxNGM1OWNWU1laZk5FTllSNXJBMnk4T1hZQW01SlhkQzArdmRPN0RzVC9TdgprQ3g4ODNSZWFVYktFc3ZDdnhmWGozV1Y0SlpMcktDMUsyWXI2UWNGVXRhUlhEcWtRaEFQZkR0ay95ME5vOVdlCllwS25DM084UFc0WmlGVDVlTENzVndLQmdRREZBOVI0cllacUNva1E2V3RJME1vblBWbGxTKyt2bGo1bi9rUUYKeTVTR1Z1UFJWSmN0aFZjR0dqd3RtTzNxOTNlb1hRY2ZkNmF5T1RGZEVqc0pGRzh4R2xKWFJLVHlGOHFLY1dVagpES2lsN0trdWYxbnFLaVNBbHBVY2VzcXZnQWhWT0kvUElUVk56ZlVJUnh5Uk91TjQ0Nkg5eTRlQTlQbjZYdmJGCjZsbllDUUtCZ1FDbFFzakFIeGtyc0k3NzBLV2FEZUhRTW41SjE0Umc2U3RUcFVJekFHVjk2TlMwZ01PZkxGT1IKOFpLTHo4dlRkdnp5Zy9jMGtYRHZuR3N1anVPMHJVM1NFMjlJYUo5dTBwZmd2Uno1OHZtY0hRL21wazA4RCs3VwpoR05oV0xHUzh2OXAzdWNuZm1HeXBIQmtBUjNzNkhXL2VUWGFyMDFTUng1dUZkdXVHT2k3Vmc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo= 
```

And apply the upgrade with the command:

```bash
helm upgrade <release name> -f upgrade.yaml theidserver
```

ex:

```bash
❯ helm upgrade aguafrommars -f upgrade.yaml theidserver
Release "aguafrommars" has been upgraded. Happy Helming!
NAME: aguafrommars
LAST DEPLOYED: Tue Oct 20 23:10:41 2020
NAMESPACE: theidserver
STATUS: deployed
REVISION: 2
NOTES:
1. Get the application URL by running these commands:
  export POD_NAME=$(kubectl get pods --namespace theidserver -l "app.kubernetes.io/name=theidserver,app.kubernetes.io/instance=aguafrommars" -o jsonpath="{.items[0].metadata.name}")
  echo "Visit https://127.0.0.1:8080 to use your application"
  kubectl --namespace theidserver port-forward $POD_NAME 8080:5443
  ```

## Configuration

The following table lists configurable parameters of the TheIdServer chart and their default values.

|Parameter|Description|Default|Remarks|
|-|-|-|-|
|`replicaCount`|Number of pod to create when autoscalling is disabled|2||
|`image.repository`|Image repository|`aguacongas/theidserver`||
|`image.pullPolicy`|Image pull policy|`IfNotPresent`||
|`image.tag`|Image tag|`1.1.1`|Possible values listed [here](https://hub.docker.com/r/aguacongas/theidserver/tags)|
|`imagePullSecrets`|Docker registry secret names as an array|`[]`||
|`nameOverride`|String to partially override fullname template with a string (will prepend the release name)|`nil`||
|`fullnameOverride`|String to fully override fullname template with a string|`nil`||
|`serviceAccount.create`|Specifies whether a ServiceAccount should be created|`true`||
|`serviceAccount.annotations`|Annotations to add to the service account|`{}`||
|`serviceAccount.name`|The name of the service account to use|`nil`|If not set and create is true, a name is generated using the fullname template|
|`podAnnotations`|Annotations to add to pods|`{}`||
|`podSecurityContext`|Pods security context|`{}`||
|`securityContext`|Containers security context|`ClusterIP`||
|`service.ports.https`|TheIdServer HTTPS service ports|`5443`||
|`service.ports.http`|TheIdServer HTTP service ports|`nil`|By default the HTTP port is not enabled. When enable, HTTP requests are redirected to HTTPS|
|`ingress.enabled`|Specifies whether a Ingress should be created|`false`||
|`ingress.annotations`|Annotations to add to the ingress|`{}`||
|`ingress.hosts`|Ingress accepted hostnames|`[theidserver.private.local]`||
|`ingress.tls`|Ingress TLS configuration|`[]`||
|`resources`|CPU/Memory resource requests/limits|`{}`||
|`autoscaling.enabled`|Specifies whether to enable autoscaling|`false`||
|`autoscaling.minReplicas`|Minimum number of workers when using autoscaling|`1`||
|`autoscaling.maxReplicas`|Maximum number of workers when using autoscaling|`100`||
|`autoscaling.targetCPUUtilizationPercentage`|Target CPU utilisation percentage to scale|`80`||
|`nodeSelector`|Node selector labels for pod assignment|`{}`||
|`tolerations`|Toleration for pod assignment|`{}`||
|`affinity`|Affinity  for pod assignment|`{}`||
|`seq.enabled`|Specifies whether a SEQ server should be created|`true`||
|`seq.image.tag`|Specifies whether a SEQ server should be created|`2020.3`||
|`seq`|Maps [Seq chart](https://github.com/helm/charts/blob/ef4f1766e1538b5488b9d43f32f21a9ac3765dbe/stable/seq) parameters|`{}`|Possible values described [here](https://github.com/helm/charts/blob/ef4f1766e1538b5488b9d43f32f21a9ac3765dbe/stable/seq/README.md)|
|`mysql.enabled`|Specifies whether a MySql cluster should be created|`true`||
|`mysql.image.tag`|Specifies whether a SEQ server should be created|`8.0.21`||
|`mysql`|Maps [MySql chart](https://github.com/bitnami/charts/blob/master/bitnami/mysql/README.md) parameters|`{}`|Possible values described [here](https://github.com/bitnami/charts/blob/master/bitnami/mysql/README.md#parameters)|
|`redis.enabled`|Specifies whether a Redis server should be created|`true`||
|`redis`|Maps Redis chart parameters|`{}`|Possible values described [here](charts/redis/README.md)|
|`connectionString`|When set, overrides the generated connection string|`nil`|Use this parameter if you don't install the MySql cluster, don't set `appSettings.file.ConnectionStrings.DefaultConnection`. The connection string is stored in a secret|
|`appSettings.env`|Overrides the server appsettings.json by env vars|`[]`||
|`appSettings.file`|Overrides the server appsettings.json file|`{}`|The server configuration is describe [here](https://github.com/Aguafrommars/TheIdServer/blob/master/src/Aguacongas.TheIdServer/README.md)|
|`adminSettings`|Overrides the admin ui appsettings.json file|`{}`|The admin ui configuration is describe [here](https://github.com/Aguafrommars/TheIdServer/blob/master/src/Aguacongas.TheIdServer.BlazorApp/README.md)|
|`ssl`|Configure Kestrel SSL certificates||See **Upgrade** section for mode information|
|`dataProtection`|Configure the certificate to crypt data protection keys||See **Upgrade** section for mode information|
|`signingKey`|Configure the certificate to crypt signing keys||See **Upgrade** section for mode information|

